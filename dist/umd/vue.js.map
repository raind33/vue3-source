{"version":3,"file":"vue.js","sources":["../../src/util.js","../../src/global-api/index.js","../../src/compiler/generate.js","../../src/compiler/html-parser.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/observer/dep.js","../../src/observer/schedular.js","../../src/observer/watcher.js","../../src/lifecycle.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/vdom/index.js","../../src/index.js"],"sourcesContent":["export function proxy (vm, data, key) {\n  Object.defineProperty(vm, key, {\n    get () {\n      return vm[data][key]\n    },\n    set (val) {\n      vm[data][key] = val\n    }\n  })\n}\n\nexport function defineProperty (target, key, value) {\n  Object.defineProperty(target, key, {\n    enumerable: false,\n    configurable: false,\n    value\n  })\n}\n\nlet callbacks = []\nlet waiting = false\nfunction flushCallback () {\n  for(let i = 0; i < callbacks.length; i++) {\n    callbacks[i]()\n  }\n  waiting = false\n}\n// 1.第一次cb渲染watcher更新操作调用nextTick,页面初渲染\n// 2. 第二次是用户主动调用nextTick的cb\n// 3.所以当在页面中使用nextTick,页面渲染与nextTick的回调都是在宏任务结束后同步执行，渲染先\n\nexport function nextTick(cb) {\n  callbacks.push(cb)\n  if (!waiting) {\n    waiting = true\n    Promise.resolve().then(flushCallback) // 多次调用nextTick，只执行一次\n  }\n}\n\nconst hooks = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted'\n]\nconst strat = {}\nhooks.forEach(hook => {\n  strat[hook] = mergeHook\n})\nfunction mergeHook (parent, child) {\n  if (child) {\n    if (parent) {\n      return parent.concat(child)\n    } else {\n      return [child]\n    }\n  } else {\n    return parent\n  }\n}\nexport function mergeOptions (parent, child) {\n  let options = {}\n\n  for (let key in parent) {\n    mergeField(key)\n  }\n  for (let key in child) {\n    if (!parent.hasOwnProperty(key)) {\n      mergeField(key)\n    }\n  }\n  return options\n  function mergeField (key) {\n    if (strat[key]) {\n      options[key] = mergeHook(parent[key], child[key])\n      return\n    }\n    if (isObj(parent[key]) && isObj(child[key])) {\n      options[key] = Object.assign(parent[key], child[key])\n    } else {\n      if (child[key]) {\n        options[key] = child[key]\n      } else if (parent[key]) {\n        options[key] = parent[key]\n      }\n    }\n\n  }\n\n}\n\nfunction isObj (val) {\n  return typeof val === 'object' && typeof val !== 'null'\n}","import { mergeOptions } from \"../util\"\n\nexport function initGlobalApi (Vue) {\n  Vue.options = {}\n\n  Vue.mixin = function (options) {\n    this.options = mergeOptions(this.options, options)\n    console.log(this.options)\n\n  }\n}\n\n","const defaultTagRe = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nexport function generate(ast) {\n  // <div id=\"app\" style=\"color:red\"> hello {{name}} <span>232</span></div>\n  // render () {\n  //   return _c('div', {id:'app',style:{color:'red'}},_v('hello'+_s(name)),_c('span',null,\n  //     _v('232')\n  //   ))\n  // }\n  let children = genChildren(ast.children)\n  let code = `_c('${ast.tag}',${\n    ast.attrs.length ? genProps(ast.attrs):'undefined'\n  }${children?`,${children}`:''})`\n\n  return code\n}\n\nfunction genProps (attrs) {\n  let str = ''\n\n  for(let i = 0; i< attrs.length; i++) {\n    const attr = attrs[i]\n    if (attr.name === 'style') {\n      let obj = {}\n      attr.value.split(';').forEach(item => {\n        const [key, value] = item.split(':')\n        obj[key] = value\n      })\n      attr.value = obj\n    }\n    str+=`${attr.name}:${JSON.stringify(attr.value)},`\n  }\n\n  return `{${str.slice(0, -1)}}`\n}\nfunction genChildren (children) {\n  if (children) {\n    return children = children.map(child => gen(child)).join(',')\n  }\n}\n\nfunction gen (child) {\n  if (child.type === 1) {\n    return generate(child)\n  } else {\n    let text = child.text\n    if (!defaultTagRe.test(text)) {\n      return `_v(${JSON.stringify(text)})`\n    }\n\n    let tokens = []\n    let lastIndex = defaultTagRe.lastIndex = 0\n    let match,index\n    //hello {{name}} wew {{age}}\n    while (match = defaultTagRe.exec(text)) {\n      index = match.index\n      if(index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n      } \n      tokens.push(`_s(${match[1].trim()})`)\n      lastIndex = index + match[0].length\n    }\n\n    if (lastIndex<text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)))\n    }\n    return `_v(${tokens.join('+')})`\n  }\n}\n","const attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\nconst startTagClose = /^\\s*(\\/?)>/\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst doctype = /^<!DOCTYPE [^>]+>/i\n// #7298: escape - to avoid being passed as HTML comment when inlined in page\nconst comment = /^<!\\--/\nconst conditionalComment = /^<!\\[/\n// <div id=\"app\" mode=2>\n//   23222222222222\n//   <p class=\"log\" model=\"3\">232<span id=\"we\">23</span></p>\n// </div>\nexport function htmlParser(html) {\n  let root\n  let currentParent\n  let stack = []\n  while (html) {\n    const textEnd = html.indexOf('<')\n    if (textEnd === 0) {\n      const startTagMatch = parseStartTag()\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n      // </span></p>\n      //  </div>\n      const endTagMatch = html.match(endTag)\n      if (endTagMatch) {\n        advance(endTagMatch[0].length)\n        end(endTagMatch[1]) // 结束标签\n        continue\n      }\n    }\n    // 匹配文本\n    let text\n    if (textEnd > 0) {\n      //   23222222222222\n      //   <p class=\"log\" model=\"3\">232<span id=\"we\">23</span></p>\n      // </div>\n      text = html.substring(0, textEnd)\n    }\n    if (text) {\n      advance(text.length)\n      chars(text)\n    }\n  }\n  // console.log(root, 9999999999)\n  return root\n  function advance(n) {\n    html = html.substring(n)\n  }\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      }\n      advance(start[0].length)\n      let end\n      let attr\n      // 匹配开始标签的属性\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        })\n        advance(attr[0].length)\n      }\n      if (end) {\n        advance(end[0].length)\n        return match\n      }\n    }\n  }\n\n  function createASTElement(tagName, attrs) {\n    return {\n      tag: tagName,\n      type: 1, // 元素类型，\n      children: [],\n      attrs,\n      parent,\n    }\n  }\n\n  function start(tagName, attrs) {\n    let element = createASTElement(tagName, attrs)\n    if (!root) {\n      root = element\n    }\n\n    currentParent = element\n    stack.push(element)\n  }\n  function chars(text) {\n    text = text.trim()\n    currentParent.children.push({\n      type: 3,\n      text,\n    })\n  }\n  function end(tagName) {\n    // 在结尾标签处创建父子关系\n    const element = stack.pop()\n    currentParent = stack[stack.length - 1]\n    if (currentParent) {\n      // 闭合时可以知道父亲是谁\n      currentParent.children.push(element)\n      element.parent = currentParent\n    }\n  }\n}\n","import { generate } from \"./generate\";\nimport { htmlParser } from \"./html-parser\";\n\nexport function compileToFunction (template) {\n  const ast = htmlParser(template)\n  const code = generate(ast)\n\n  const render = new Function(`with(this){return ${code}}`)\n  return render\n}","export function patch (oldVnode, vnode) {\n\n  const isRealEl = oldVnode.nodeType\n  if (isRealEl) {\n    let el = createEle(vnode)\n    let parentEl = oldVnode.parentNode\n    parentEl.insertBefore(el, oldVnode.nextSibling)\n    parentEl.removeChild(oldVnode)\n    return el\n  } else {\n\n  }\n}\n\nfunction createEle (vnode) {\n  let { tag, data, children, key, text } = vnode\n  if (typeof tag === 'string') {\n    vnode.el  = document.createElement(tag)\n    patchProps(vnode)\n    children.forEach(child => {\n      vnode.el.appendChild(createEle(child))\n    })\n  } else {\n    vnode.el = document.createTextNode(text)\n  }\n\n  return vnode.el\n}\n\nfunction patchProps (vnode) {\n  const newProps = vnode.data || {}\n  const el = vnode.el\n  for(let key in newProps) {\n    if (key === 'style') {\n      for (let s in newProps[key]) {\n        el.style[s] = newProps[key][s]\n      }\n    } else if (key === 'class') {\n      el.className = newProps[key]\n    } else {\n      el.setAttribute(key, newProps[key])\n    }\n\n  }\n}","let id = 0\nclass Dep {\n  constructor () {\n    this.id = id++\n    this.subs = [] // 需要记住的watcher\n  }\n\n  depend () {\n    Dep.target.addDep(this)\n  }\n\n  addSub (watcher) {\n    this.subs.push(watcher)\n    console.log(this.subs)\n  }\n\n  notify () {\n    this.subs.forEach(watcher => {\n      watcher.update()\n    })\n  }\n}\n\nDep.target = null\n\nexport function pushTarget (watcher) {\n  Dep.target = watcher\n}\n\nexport function popTarget () {\n  Dep.target = null\n}\nexport default Dep","import { nextTick } from \"../util\"\n\nlet queue = []\nlet has = {}\nlet pending = false\nfunction flushSchedular () {\n  for (let i = 0; i < queue.length; i++) {\n    const watcher = queue[i]\n    watcher.run()\n  }\n  queue = []\n  has = {}\n  pending = false\n}\n// 多次调用queueWatcher， 如果watcher不是同一个也会重复调用nextTick\nexport function queueWatcher (watcher) {\n  const id = watcher.id\n  if (has[id] == null) {\n    queue.push(watcher)\n    has[id] = true\n    if(!pending) {\n      pending = true\n      nextTick(flushSchedular)\n    }\n  }\n}","import { popTarget, pushTarget } from \"./dep\"\nimport { queueWatcher } from \"./schedular\"\n\nlet id = 0\nexport default class Watcher {\n  constructor (vm, exprOrFn, cb, renderWatcher) {\n    this.vm = vm\n    this.cb = cb\n    this.getter = exprOrFn\n    this.options = vm.options\n    this.id = id++\n    this.deps = []\n    this.depsId = new Set()\n    this.get()\n  }\n\n  // 当属性取值时，需要记住这个watcher。数据再次变化，就去执行自己记住的这个watcher\n  get () { // 这个方法会对属性进行取值\n    pushTarget(this)\n    this.getter()\n    popTarget()\n  }\n\n  addDep (dep) {\n    if (!this.depsId.has(dep.id)) {\n      this.depsId.add(dep.id)\n      this.deps.push(dep)\n      dep.addSub(this)\n    }\n  }\n  run () {\n    this.get()\n  }\n  update () {\n    queueWatcher(this)\n    // this.get()\n  }\n}","import { patch } from \"./vdom/patch\"\nimport Watcher from \"./observer/watcher\"\n\nexport function lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this\n    vm.$el = patch(vm.$el, vnode)\n    console.log(vm.$el)\n  }\n}\nexport function callHook (vm, key) {\n  const handlers = vm.$options[key]\n  handlers.forEach(handle => handle.call(vm))\n}\nexport function mountComponent (vm, el) {\n\n  const updateComponent = () => {\n\n    vm._update(vm._render())\n  }\n\n  // true代表是渲染watcher\n  new Watcher(vm, updateComponent, () => {}, true)\n}","const oldArrayMethods = Array.prototype\n\nexport const newArrayProto = Object.create(oldArrayMethods)\nlet methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'reverse',\n  'sort'\n]\n\nmethods.forEach(method => {\n  newArrayProto[method] = function (...args) {\n    const result = oldArrayMethods[method].apply(this, args)\n    let insert\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        insert = args\n        break\n      case 'splice':\n        insert = args.slice(2)\n        break\n      default:\n        break;\n    }\n\n    if (insert) {\n      this.__ob__.observedArray(insert)\n    }\n    this.__ob__.dep.notify()\n    return result\n  }\n})","import { newArrayProto } from './array'\nimport { defineProperty } from '../util'\nimport Dep from './dep'\nclass Observer {\n  constructor (data) {\n    this.dep = new Dep() // 给数组和对象本身增加一个dep属性\n    defineProperty(data, '__ob__', this)\n    if (Array.isArray(data)) {\n      data.__proto__ = newArrayProto\n      this.observedArray(data)\n      return\n    }\n    this.walk(data)\n  }\n  observedArray (arr) {\n    arr.forEach(item => {\n      observe(item)\n    })\n  }\n  walk (data) {\n    Object.keys(data).forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n  \n}\n\n// 让里层数组收集外层数组的依赖，这样修改里层数组也可以更新视图\nfunction dependArray (val) {\n  for(let i = 0; i < val.length;i++) {\n    const current = val[i]\n    current.__ob__ && current.__ob__.dep.depend()\n    if (Array.isArray(current)) {\n      dependArray(current)\n    }\n  }\n}\nfunction defineReactive (data, key, val) {\n  const childOb = observe(val)\n\n  const dep = new Dep() // 每次都会给属性创建一个dep\n\n  Object.defineProperty(data, key, {\n    get () {\n      // console.log('获取值')\n      if (Dep.target) {\n        dep.depend() // 让这个属性自己的dep记住这个watcher\n        if (childOb) {\n          childOb.dep.depend()\n          if (Array.isArray(val)) {\n            dependArray(val)\n          }\n        }\n      }\n      return val\n    },\n    set (newVal) {\n      // console.log('设置值')\n      if (val === newVal) return\n      observe(newVal)\n      val = newVal\n      dep.notify()\n    }\n  })\n}\nexport function observe (data) {\n  if (typeof data !== 'object' || typeof data === null) {\n    return\n  }\n\n  if (data.__ob__) return data\n  return new Observer(data)\n}","import { observe } from './observer/index'\nimport { proxy } from './util'\nexport function initState (vm) {\n  const opts = vm.$options\n\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.methods) {\n    initMethods(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n}\n\nfunction initProps () {}\nfunction initData (vm) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n  observe(data)\n}\nfunction initMethods () {}\nfunction initWatch () {}\nfunction initComputed () {}","\nimport { compileToFunction } from './compiler/index'\nimport { callHook, mountComponent } from './lifecycle'\nimport { initState } from './state'\nimport { mergeOptions, nextTick } from './util'\nexport function initMixin (Vue) {\n  Vue.prototype._init = function (opts) {\n    \n    const vm = this\n    vm.$options = mergeOptions(vm.constructor.options, opts)\n    callHook(vm, 'beforeCreate')\n    initState(vm)\n    callHook(vm, 'created')\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n\n  }\n  Vue.prototype.$nextTick = nextTick\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const opts = vm.$options\n\n    el = document.querySelector(el)\n    vm.$el = el\n    if (!opts.render) {\n      let template = opts.template\n      if (!template && el) {\n        template = el.outerHTML\n      }\n      opts.render = compileToFunction(template)\n    }\n\n    mountComponent(vm, el)\n  }\n}","export function renderMixin (Vue) {\n  Vue.prototype._c = function () {\n    return createElement(...arguments)\n  }\n  Vue.prototype._s = function (val) {\n    return val === null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val)\n  }\n  Vue.prototype._v = function (text) {\n    return createTextVnode(text)\n  }\n  Vue.prototype._render = function () {\n    const vm = this\n    const render = vm.$options.render\n\n    const vnode = render.call(vm)\n    return vnode\n  }\n}\n\nfunction createElement (tag, data = {}, ...children) {\n  return vnode(tag, data, data.key, children)\n}\n\nfunction createTextVnode (text) {\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\nfunction vnode (tag, data, key, children, text) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text\n  }\n}","import { initGlobalApi } from \"./global-api/index\"\nimport { initMixin } from \"./init\"\nimport { lifecycleMixin } from \"./lifecycle\"\nimport { renderMixin } from \"./vdom/index\"\n\nfunction Vue (options) {\n  this._init(options)\n}\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\ninitGlobalApi(Vue)\n\nexport default Vue"],"names":["proxy","vm","data","key","Object","defineProperty","get","set","val","target","value","enumerable","configurable","callbacks","waiting","flushCallback","i","length","nextTick","cb","push","Promise","resolve","then","hooks","strat","forEach","hook","mergeHook","parent","child","concat","mergeOptions","options","mergeField","hasOwnProperty","isObj","assign","initGlobalApi","Vue","mixin","console","log","defaultTagRe","generate","ast","children","genChildren","code","tag","attrs","genProps","str","attr","name","obj","split","item","JSON","stringify","slice","map","gen","join","type","text","test","tokens","lastIndex","match","index","exec","trim","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","htmlParser","html","root","currentParent","stack","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","endTagMatch","advance","end","substring","chars","n","createASTElement","element","pop","compileToFunction","template","render","Function","patch","oldVnode","vnode","isRealEl","nodeType","el","createEle","parentEl","parentNode","insertBefore","nextSibling","removeChild","document","createElement","patchProps","appendChild","createTextNode","newProps","s","style","className","setAttribute","id","Dep","constructor","subs","depend","addDep","addSub","watcher","notify","update","pushTarget","popTarget","queue","has","pending","flushSchedular","run","queueWatcher","Watcher","exprOrFn","renderWatcher","getter","deps","depsId","Set","dep","add","lifecycleMixin","prototype","_update","$el","callHook","handlers","$options","handle","call","mountComponent","updateComponent","_render","oldArrayMethods","Array","newArrayProto","create","methods","method","args","result","apply","insert","__ob__","observedArray","Observer","isArray","__proto__","walk","arr","observe","keys","defineReactive","dependArray","current","childOb","newVal","initState","opts","props","initData","watch","computed","_data","initMixin","_init","$mount","$nextTick","querySelector","outerHTML","renderMixin","_c","arguments","_s","_v","createTextVnode","undefined"],"mappings":"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"}